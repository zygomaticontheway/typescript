import { useEffect, useState } from "react";
import MyButton from "../../components/myButton/MyButton";

function Lesson09 () {
    interface IDogData {
        message: string,
        status: string
    }

    //–∫–æ–¥ —Å —ç—Ç–æ–π —Å—Ç—Ä–æ—á–∫–∏ –∏ –¥–æ return –±—É–¥–µ—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    const [count, setCount] = useState(0)

    useEffect(() => {
        fetch ('https://dog.ceo/api/breeds/image/random')
            .then(res => res.json())
            .then(data => console.log(data));

    }, [count])

    const fetchDog = () => {
        fetch ('https://dog.ceo/api/breeds/image/random')
            .then(res => res.json())
            .then(data => setDog(data));
    }

    //–≤ –º–∞—Å—Å–∏–≤–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –º—ã —É–∫–∞–∑—ã–≤–∞–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –æ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –≤–Ω—É—Ç—Ä–∏ useEffect
    useEffect(() => {
        fetchDog();
    }, [])
    
    
    const handlePlus = () => {
        setCount(prev => prev + 1)
        fetchDog()
    }

    function sum (a: number, b: number) {
        return a + b;
    }

    const [dog, setDog] = useState<IDogData>({
        message:'',
        status:''
    })

    

    return(
        <div className="lesson-container">
            <h3>Lesson 09</h3>
            <h4>useEffect hook ü™ù</h4>
            <h5>–ü—Ä–æ–±–ª–µ–º–∞, –∫–æ—Ç–æ—Ä—É—é —Ä–µ—à–∞–µ—Ç —ç—Ç–æ—Ç Hook</h5>
            
            <p>{count}</p>
            <MyButton onClick={handlePlus} name={'plus'}/>
            <img src={dog.message} width={140} alt="" />

            <p>useEffect - —Ñ—É–Ω–∫—Ü–∏—è –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤ —Å–µ–±—è 2 –ø–∞—Ä–∞–º–µ—Ç—Ä–∞:
                <ol>
                    <li>—Å—Ç—Ä–µ–ª–æ—á–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é —Å –¥–µ–π—Å—Ç–≤–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –º—ã —Ö–æ—Ç–∏–º –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö</li>
                    <li>–º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–º —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –æ—Ç –∫–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –∑–∞–≤–∏—Å–µ—Ç—å –∑–∞–ø—É—Å–∫ –¥–µ–π—Å—Ç–≤–∏–π.</li>
                </ol>
                –µ—Å–ª–∏ –º–∞—Å—Å–∏–≤ –ø—É—Å—Ç–æ–π, –∫–æ–¥ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ (mounting) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
            </p>
            <p>–ú—ã –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å useEffect –¥–ª—è –∏–∑–æ–ª—è—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ = —Å –ø—É—Å—Ç—ã–º –º–∞—Å—Å–∏–≤–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π</p>
            <p>–õ—é–±–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–µ–π—Ç–∞ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞. —Ç.–µ. –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
                –±—É–¥—É—Ç –ø–æ–≤—Ç–æ—Ä—è—Ç—å—Å—è —Ä–∞–∑ –∑–∞ —Ä–∞–∑–æ–º, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –º—ã –±—ã –Ω–µ —Ö–æ—Ç–µ–ª–∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å.</p>
            <p>–ù—É–∂–µ–Ω —Å–ø–æ—Å–æ–± –∏–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ –æ—Ç –ø–æ–≤—Ç–æ—Ä–∞ , –≥–¥–µ —ç—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ</p>
            
            <h5>–í—Å–ø–æ–º–∏–Ω–∞–µ–º fetch –∑–∞–ø—Ä–æ—Å—ã:</h5>
            <ul>
                <li>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞ –¥–∞–Ω–Ω—ã–µ</li>
                <li>–î–∞–Ω–Ω—ã–µ –ø—Ä–∏—Ö–æ–¥—è—Ç –Ω–µ —Å—Ä–∞–∑—É, –∏—Ö –Ω—É–∂–Ω–æ –ø–æ–¥–æ–∂–¥–∞—Ç—å</li>
                <li>–í –æ—Ç–≤–µ—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç –æ—Å–æ–±—ã–π –æ–±—ä–µ–∫—Ç Promise –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ Pending (–æ–±—Ä–∞–±–æ—Ç–∫–∏) - –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã—Ö –Ω—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å–æ–±—ã–º —Å–ø–æ—Å–æ–±–æ–º</li>
                <li>1-–π —Å–ø–æ—Å–æ–±: —Ü–µ–ø–æ—á–∫–∞ –∏–∑ .then() –º–µ—Ç–æ–¥–æ–≤</li>
                <li>2-–π —Å–ø–æ—Å–æ–±: –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º asunc/await</li>
                <li>–í –æ—Ç–≤–µ—Ç –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞</li>
                <li>–ß–∞—â–µ –≤—Å–µ–≥–æ –æ–Ω–∏ –±—É–¥—É—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON</li>
                <li>–î–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å 2 —Ä–∞–∑–∞</li>
                <li>–°–Ω–∞—á–∞–ª–∞ –¥–æ–∂–∏–¥–∞–µ–º—Å—è —Å–∞–º–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –ø–æ—Ç–æ–º –¥–æ–∂–∏–¥–∞–µ–º—Å—è –º–µ—Ç–æ–¥–∞ .json()</li>
            </ul>

        </div>
    )
}

export default Lesson09;